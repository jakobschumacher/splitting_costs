<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Enhanced Title for SEO -->
    <title>Free Cost Splitter | Group Travel Expense Calculator | Costsplitter</title>

    <!-- Meta Description -->
    <meta name="description" content="Free online cost splitter for group travel. Upload CSV files to automatically calculate fair payment splits. Supports complex scenarios with partial participation, age adjustments, and family groupings.">

    <!-- Keywords for better search ranking -->
    <meta name="keywords" content="cost splitter, expense sharing, group travel calculator, bill splitting, travel expenses, CSV upload, payment calculator, fair cost division, expense tracker">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://jakobschumacher.github.io/splitting_costs/">

    <!-- Language alternates -->
    <link rel="alternate" hreflang="en" href="https://jakobschumacher.github.io/splitting_costs/">
    <link rel="alternate" hreflang="de" href="https://jakobschumacher.github.io/splitting_costs/">
    <link rel="alternate" hreflang="x-default" href="https://jakobschumacher.github.io/splitting_costs/">

    <!-- Open Graph for social sharing -->
    <meta property="og:title" content="Costsplitter - Fair Cost Division for Group Travel">
    <meta property="og:description" content="Upload your expense CSV and get instant payment calculations. Perfect for family trips, business travel, and group activities.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://jakobschumacher.github.io/splitting_costs/">
    <meta property="og:site_name" content="Costsplitter">
    <meta property="og:locale" content="en_US">

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Costsplitter - Fair Cost Division">
    <meta name="twitter:description" content="Free online tool for splitting group travel expenses fairly">

    <!-- Author and robots -->
    <meta name="author" content="Jakob Schumacher">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

    <!-- Structured Data for Search Engines -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Costsplitter",
      "description": "Free online cost splitting calculator for group travel expenses with CSV upload support",
      "url": "https://jakobschumacher.github.io/splitting_costs/",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "Web Browser",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "EUR"
      },
      "creator": {
        "@type": "Person",
        "name": "Jakob Schumacher"
      },
      "featureList": [
        "CSV file upload",
        "Automatic payment calculation",
        "Group and individual payment modes",
        "Multi-language support",
        "PDF report generation",
        "Fair cost division algorithms"
      ]
    }
    </script>

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">

    <!-- External Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="text-center mb-8">
            <div style="position: relative;">
                <h1 style="margin: 0 0 0.5rem 0;" data-i18n="header.title">Costsplitter</h1>
                <div style="position: absolute; top: 0; right: 0; display: flex; gap: 0.5rem;">
                    <select id="languageSelector" class="btn" style="width: auto; height: 2rem; border-radius: 1rem; padding: 0 0.5rem; font-size: 0.875rem; background: #f3f4f6; color: #374151; border: 1px solid #d1d5db;">
                        <option value="en">EN</option>
                        <option value="de">DE</option>
                    </select>
                    <button id="resetButton" class="btn" style="width: 2rem; height: 2rem; border-radius: 50%; padding: 0; font-size: 1rem; background: #f3f4f6; color: #374151; border: 1px solid #d1d5db;" data-i18n="button.reset" title="Reset">↻</button>
                </div>
            </div>
            <p data-i18n="header.subtitle">Fair cost division for group travel</p>
            <p style="color: #6b7280; font-size: 0.875rem; margin-top: 0.5rem;" data-i18n="header.description">Upload your expense CSV file to automatically calculate who owes what to whom. Supports individual payments and shared expenses with customizable split ratios.</p>
        </header>

        <!-- CSV Help Modal -->
        <div id="csvHelpModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
            <div style="position: relative; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem; border-radius: 0.5rem; max-width: 800px; max-height: 80vh; overflow-y: auto;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h3 style="font-size: 1.25rem; font-weight: 600; color: #1f2937; margin: 0;" data-i18n="csvHelp.modal.title">CSV File Format</h3>
                    <button id="closeCsvHelp" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6b7280;">&times;</button>
                </div>
                <div data-i18n="csvHelp.modal.content">
                    <p style="margin-bottom: 1rem; color: #4b5563;">The data should contain the following columns:</p>
                    <ul style="color: #4b5563; line-height: 1.6; padding-left: 1.5rem;">
                        <li style="margin-bottom: 1rem;"><strong>The name column.</strong> This column indicates the names of the persons involved. This is a must have column otherwise the package will throw an error. The names must be unique.</li>
                        <li style="margin-bottom: 1rem;"><strong>The pay_ columns.</strong> These columns hold the amount that somebody paid for one activity. At least one pay_ column must be available. Each pay_column must match with one share_column. This must be done by a corresponding part after the _ e.g. pay_breakfast and share_breakfast. The value should be numeric. All pay_ columns should either start with pay_.</li>
                        <li style="margin-bottom: 1rem;"><strong>The share_columns.</strong> These columns hold the share that everyone has to pay for the activity. The second part of the name after the _ must correspond to one pay_column. The value can be numeric. It must be between 0 (meaning the person does not have to pay) and 1 (meaning the person does have to pay a full share) or it can have one of the following categorical values full, reduced, half or some. These categorical values will be transformed to numerical values. NA values and empty values will be translated into 0. All share_ columns should either start with share_.</li>
                        <li style="margin-bottom: 1rem;"><strong>The group column.</strong> Several persons can be put together to form a group. This can be indicated in this column.</li>
                        <li style="margin-bottom: 1rem;"><strong>The age column.</strong> This column indicates the age of the persons involved. The value should be an integer value between 0 and 120. The value could also be either adult or kid, that will be translated into 1 and 0.5 respectively. NA values and empty values will be translated into 1.</li>
                        <li style="margin-bottom: 0;"><strong>The adjustment column.</strong> To give a general bonus or malus that will apply the complete amount somebody has to pay you can use the adjustment column. This column can be numeric between 0 (indicating the person does not have to pay) and 100 (indicating 100x times the normal share). The value can also be categorical with more indicating that the person should pay 1.2 times more and less indicating that the person should pay only 0.8 of the usual amount. NA values and empty values will be translated into 1.</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Step 1: Upload Your Data -->
        <section id="step1" class="step-section">
            <div class="step-header">
                <div class="step-header-left">
                    <span class="step-number">1</span>
                    <h2 data-i18n="step1.title">Upload Your Data</h2>
                </div>
                <button class="step-help-button" data-step="1" title="Get help with file upload">?</button>
            </div>
            <div class="card">

                <div id="dropZone" class="drop-zone">
                    <!-- Default upload state -->
                    <div id="uploadDefaultState">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">⬆</div>
                        <h3 data-i18n="step1.upload.title">Drop your CSV file here or click to browse</h3>
                        <p style="color: #6b7280;" data-i18n="step1.upload.subtitle">Supports files up to 10MB</p>
                    </div>

                    <!-- File uploaded state (hidden by default) -->
                    <div id="uploadedState" class="hidden">
                        <div style="font-size: 4rem; margin-bottom: 1rem; color: #059669;">✓</div>
                        <h3 style="color: #059669; margin-bottom: 0.5rem;" data-i18n="step1.upload.success">File uploaded successfully!</h3>
                        <p style="color: #6b7280; font-size: 0.875rem; margin-bottom: 0;"><span data-i18n="step1.upload.ready">Ready to configure processing options</span> <span id="uploadedFileNameBottom"></span></p>
                    </div>

                </div>
                <input type="file" id="csvFile" class="hidden" accept=".csv">

                <!-- Help content for Step 1 -->
                <div id="helpContent1" class="step-help-content hidden">
                    <div class="help-header">
                        <h4 id="helpTitle1" data-i18n="csvHelp.title">CSV File Format</h4>
                        <button class="close-help-button" data-step="1">×</button>
                    </div>
                    <div id="helpStep1Content">
                        <p style="margin-bottom: 0.5rem; font-size: 0.875rem;" data-i18n="csvHelp.description">Your CSV should contain the following columns:</p>
                        <ul style="font-size: 0.875rem; margin: 0.5rem 0; padding-left: 1.5rem;">
                            <li><strong data-i18n="csvHelp.columns.name">name - participant name (required)</strong></li>
                            <li><strong data-i18n="csvHelp.columns.group">group - optional grouping (e.g., family name)</strong></li>
                            <li><strong data-i18n="csvHelp.columns.pay">pay_[activity] - amount already paid for activity</strong></li>
                            <li><strong data-i18n="csvHelp.columns.cost">cost_[activity] - participation level (full, half, 0.5, etc.)</strong></li>
                            <li><strong data-i18n="csvHelp.columns.age">age - optional age or category (adult, kid, numeric)</strong></li>
                            <li><strong data-i18n="csvHelp.columns.adjustment">adjustment - optional payment modifier (more, less, 1.2)</strong></li>
                        </ul>
                        <p style="font-size: 0.875rem; margin-bottom: 1rem;"><span data-i18n="csvHelp.example">Example:</span> <code style="background: #e5e7eb; padding: 0.125rem 0.25rem; border-radius: 0.25rem;">"name,group,pay_dinner,cost_dinner\nAlice,Family A,100,full\nBob,Family B,50,0.5"</code></p>

                        <h5 style="margin: 1rem 0 0.5rem 0; color: #047857;" data-i18n="csvHelp.commonIssues">Common Issues:</h5>
                        <ul style="font-size: 0.875rem; margin: 0.5rem 0; padding-left: 1.5rem; color: #6b7280;">
                            <li data-i18n="csvHelp.issue1">• Missing "name" column - this is required for all participants</li>
                            <li data-i18n="csvHelp.issue2">• Mixing text and numbers in payment columns (use numbers only)</li>
                            <li data-i18n="csvHelp.issue3">• File saved as Excel (.xlsx) instead of CSV format</li>
                            <li data-i18n="csvHelp.issue4">• Extra commas or quotes causing parsing errors</li>
                        </ul>

                        <p style="font-size: 0.875rem; margin: 1rem 0 0.5rem 0; font-weight: 600;" data-i18n="csvHelp.examples">Need an example? Try:</p>
                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="btn" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;" data-example="simple" data-i18n="step1.welcome.examples.simple">Simple Dinner</button>
                            <button class="btn" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;" data-example="family" data-i18n="step1.welcome.examples.family">Family Trip</button>
                            <button class="btn" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;" data-example="business" data-i18n="step1.welcome.examples.business">Business Travel</button>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; padding: 1.5rem 1rem; border-top: 1px solid #f3f4f6;">
                    <p style="color: #6b7280; font-size: 0.875rem; margin-bottom: 1rem;">
                        <a href="#" id="csvFormatHelpLink" style="color: #6b7280; text-decoration: underline; margin-right: 1rem; cursor: pointer; user-select: text;" data-i18n="step1.csvFormatHelp">Klicken Sie hier um zu sehen wie die Datei aufgebaut sein soll</a>
                        <span data-i18n="step1.welcome.exampleText">Need an example? Try one of our sample files:</span>
                    </p>
                    <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;">
                        <button class="btn" style="font-size: 0.875rem; padding: 0.375rem 0.75rem;" data-example="simple" data-i18n="step1.welcome.examples.simple">Simple Dinner</button>
                        <button class="btn" style="font-size: 0.875rem; padding: 0.375rem 0.75rem;" data-example="family" data-i18n="step1.welcome.examples.family">Family Trip</button>
                        <button class="btn" style="font-size: 0.875rem; padding: 0.375rem 0.75rem;" data-example="business" data-i18n="step1.welcome.examples.business">Business Travel</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 2: Configure & Process -->
        <section id="step2" class="step-section step-disabled">
            <div class="step-header">
                <div class="step-header-left">
                    <span class="step-number">2</span>
                    <h2 data-i18n="step2.title">Configure & Process</h2>
                </div>
                <button class="step-help-button" data-step="2" title="Get help with processing options">?</button>
            </div>
            <div class="card">
                <!-- Disabled State Message -->
                <div id="step2Disabled" class="step-disabled-message" style="padding: 2rem; text-align: center; color: #9ca3af;">
                    <div class="step-icon-disabled" style="width: 64px; height: 64px; margin: 0 auto 1.5rem; border: 2px solid #d1d5db; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: #f9fafb;">
                        <div style="font-size: 1.5rem; color: #9ca3af;">2</div>
                    </div>
                    <h3 style="color: #6b7280; margin-bottom: 0.5rem;" data-i18n="step2.disabled.title">Processing Options</h3>
                    <p style="margin: 0;" data-i18n="step2.disabled.message">Upload a CSV file to configure processing options</p>
                </div>

                <!-- Processing Options (hidden initially) -->
                <div id="processingOptions" class="hidden" style="padding: 1.5rem; background: #f9fafb; border-radius: 0.5rem; border: 1px solid #e5e7eb;">
                    <h4 style="margin-top: 0; margin-bottom: 1.5rem; color: #374151;" data-i18n="step2.options.title">Processing Options</h4>
                    <div class="settings-container">
                        <!-- Payment Mode Toggle -->
                        <div class="setting-group">
                            <label class="setting-label" data-i18n="step2.paymentMode.label">Payment Mode</label>
                            <div class="toggle-container">
                                <span class="toggle-label" id="individualLabel" data-i18n="step2.paymentMode.individual">Individual</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="paymentModeToggle">
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label" id="groupLabel" data-i18n="step2.paymentMode.group">Group</span>
                            </div>
                            <p class="setting-description" id="paymentModeDescription" data-i18n="step2.paymentMode.description.individual">
                                Individual: Each person's expenses are tracked separately
                            </p>
                        </div>

                        <!-- Rounding Toggle -->
                        <div class="setting-group">
                            <label class="setting-label" data-i18n="step2.rounding.label">Amount Rounding</label>
                            <div class="toggle-container">
                                <span class="toggle-label" id="exactLabel" data-i18n="step2.rounding.exact">Exact</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="roundingToggle">
                                    <span class="toggle-slider rounding-slider"></span>
                                </label>
                                <span class="toggle-label" id="roundToFiveLabel" data-i18n="step2.rounding.roundToFive">Round to 5€</span>
                            </div>
                            <p class="setting-description" id="roundingDescription" data-i18n="step2.rounding.description.exact">
                                Exact: Keep precise amounts down to cents
                            </p>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button id="processButton" class="btn btn-primary" disabled data-i18n="step2.processButton">
                            Process File
                        </button>
                    </div>
                </div>

                <!-- Horizontal Progress Steps -->
                <div id="progressSteps" class="hidden" style="margin-top: 2rem;">
                    <h3 id="progressTitle" style="margin-bottom: 1rem;" data-i18n="step2.progress.title">Processing Your File</h3>
                    <div class="progress-horizontal">
                        <div class="progress-step-horizontal" data-step="parsing">
                            <div class="progress-icon">⚙</div>
                            <div class="progress-label" data-i18n="step2.progress.parsing">Parsing</div>
                        </div>
                        <div class="progress-connector"></div>
                        <div class="progress-step-horizontal" data-step="security">
                            <div class="progress-icon">⚿</div>
                            <div class="progress-label" data-i18n="step2.progress.security">Security</div>
                        </div>
                        <div class="progress-connector"></div>
                        <div class="progress-step-horizontal" data-step="validation">
                            <div class="progress-icon">✓</div>
                            <div class="progress-label" data-i18n="step2.progress.validation">Validation</div>
                        </div>
                        <div class="progress-connector"></div>
                        <div class="progress-step-horizontal" data-step="transformation">
                            <div class="progress-icon">↔</div>
                            <div class="progress-label" data-i18n="step2.progress.transformation">Transform</div>
                        </div>
                        <div class="progress-connector"></div>
                        <div class="progress-step-horizontal" data-step="calculation">
                            <div class="progress-icon">∑</div>
                            <div class="progress-label" data-i18n="step2.progress.calculation">Calculate</div>
                        </div>
                        <div class="progress-connector"></div>
                        <div class="progress-step-horizontal" data-step="reporting">
                            <div class="progress-icon">※</div>
                            <div class="progress-label" data-i18n="step2.progress.reporting">Report</div>
                        </div>
                    </div>
                </div>

                <!-- Loading Display -->
                <div id="loadingDisplay" class="hidden text-center" style="padding: 2rem;">
                    <div class="spinner"></div>
                    <p style="margin-top: 0.5rem; color: #6b7280;">Processing your file...</p>
                </div>

                <!-- Error Display -->
                <div id="errorDisplay" class="hidden" style="margin-top: 2rem; padding: 1rem; border-radius: 0.375rem; border: 1px solid #fecaca; background: #fef2f2;"></div>

                <!-- Help content for Step 2 -->
                <div id="helpContent2" class="step-help-content hidden">
                    <div class="help-header">
                        <h4 id="helpTitle2" data-i18n="help.step2.title">Processing Options</h4>
                        <button class="close-help-button" data-step="2">×</button>
                    </div>
                    <div id="helpStep2Content">
                        <p style="margin-bottom: 1rem; font-size: 0.875rem;" data-i18n="help.step2.description">Choose how to handle payments and rounding before processing your data.</p>
                        <p style="margin-bottom: 0.5rem; font-size: 0.875rem;" data-i18n="help.step2.paymentModes">Payment Modes: Individual tracks each person separately, Group combines family/team units.</p>
                        <p style="margin-bottom: 0; font-size: 0.875rem;" data-i18n="help.step2.rounding">Rounding: Exact keeps precise amounts, Round to 5€ simplifies final payments.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 3: Results -->
        <section id="step3" class="step-section step-disabled">
            <div class="step-header">
                <div class="step-header-left">
                    <span class="step-number">3</span>
                    <h2 data-i18n="step3.title">Results</h2>
                </div>
                <button class="step-help-button" data-step="3" title="Get help with understanding results">?</button>
            </div>
            <div class="card">
                <!-- Disabled State Message -->
                <div id="step3Disabled" class="step-disabled-message" style="padding: 2rem; text-align: center; color: #9ca3af;">
                    <div class="step-icon-disabled" style="width: 64px; height: 64px; margin: 0 auto 1.5rem; border: 2px solid #d1d5db; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: #f9fafb;">
                        <div style="font-size: 1.5rem; color: #9ca3af;">3</div>
                    </div>
                    <h3 style="color: #6b7280; margin-bottom: 0.5rem;" data-i18n="step3.disabled.title">Payment Results</h3>
                    <p style="margin: 0;" data-i18n="step3.disabled.message">Process your file to see payment calculations and reports</p>
                </div>

                <!-- Results Content (hidden initially) -->
                <div id="resultsContent" class="hidden">
                    <div class="space-y-4">
                        <div>
                            <div id="matrixContent" class="overflow-x-auto">
                                <!-- Combined matrix and instructions table will be inserted here -->
                            </div>
                        </div>

                    <div style="margin-top: 2rem; text-align: center;">
                        <button id="downloadPdfButton" class="btn btn-primary" data-i18n="step3.downloadPdf">Download PDF Report</button>
                    </div>
                    </div>

                    <!-- Help content for Step 3 -->
                    <div id="helpContent3" class="step-help-content hidden">
                        <div class="help-header">
                            <h4 id="helpTitle3" data-i18n="help.step3.title">Understanding Results</h4>
                            <button class="close-help-button" data-step="3">×</button>
                        </div>
                        <div id="helpStep3Content">
                            <p style="margin-bottom: 1rem; font-size: 0.875rem;" data-i18n="help.step3.description">Review who owes what to whom and download a detailed payment report.</p>
                            <p style="margin-bottom: 0.5rem; font-size: 0.875rem;" data-i18n="help.step3.matrix">Payment Matrix shows each person's obligations and the actions needed.</p>
                            <p style="margin-bottom: 0; font-size: 0.875rem;" data-i18n="help.step3.pdf">Download the PDF report for detailed activity breakdown and comprehensive analysis.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <script type="module" src="src/i18n/i18n.js"></script>
    <script type="module" src="src/ui/app.js"></script>
</body>
</html>